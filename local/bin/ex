#!/bin/bash

FORMAT_ERROR="\e[1;31m[ERROR]"
FORMAT_TITLE="\e[0;34m"
FORMAT_END="\e[0m"

function help() {
	printf "${FORMAT_TITLE}USAGE:${FORMAT_END} $(basename $0) INPUT_FILE\n"
	exit 1
}


function main() {
	local file="$1"

	while getopts "h" opt; do
		case $opt in
			h) help ;;
			*) help ;;
		esac
	done

	[ -z "$file" ] && help

	case "$file" in
		*.tar.bz2)  xjf        "$file" ;;
		*.tar.gz)   tar xzf    "$file" ;;
		*.bz2)      bunzip2    "$file" ;;
		*.rar)      unrar x    "$file" ;;
		*.gz)       gunzip     "$file" ;;
		*.tar)      tar xf     "$file" ;;
		*.tbz2)     tar xjf    "$file" ;;
		*.tgz)      tar xzf    "$file" ;;
		*.zip)      unzip      "$file" ;;
		*.Z)        uncompress "$file" ;;
		*.7z)       7z x       "$file" ;;
		*.deb)      ar x       "$file" ;;
		*.tar.xz)   tar xf     "$file" ;;
		*.tar.zst)  unzstd     "$file" ;;
		*) printf "${FORMAT_ERROR} $file cannot be extracted via ex()${FORMAT_END}\n" ;;
	esac
}

main "$@"
